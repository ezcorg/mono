---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
---

<Layout title="ez dev | software development, only easier">
	<section
		class="w-[min(80ch,100vw)] min-h-screen mt-[8rem] flex items-start justify-center px-6 md:px-8"
	>
		<div class="w-full mx-auto flex flex-col gap-8">
			<Navbar currentPath="/" />
			<h1
				class="text-7xl font-light text-[#F5F5F5] mb-8 md:mb-12"
				style="font-family: Times; line-height: 1.2; letter-spacing: -0.02em;"
			>
				<br />
				build{' '}
				<span
					class="inline-block font-bold relative text-[#F5F5F5]"
					id="dynamic-text"
				>
					<span class="inline-block">{''}</span>
					<span
						class="absolute top-0 left-full ml-[4px] w-[2px] h-[1em] bg-[#F5F5F5] animate-blink"
					></span>
				</span>
			</h1>
			<p
				class="text-xl md:text-2xl text-[#F5F5F5] max-w-2xl mb-12"
				style="font-family: Times;"
			>
				For those seeking simple, open, user-friendly solutions.
			</p>
			<div class="flex flex-col sm:flex-row gap-4">
				<a
					href="/newproject"
					class="inline-block bg-[#F5F5F5] text-black px-8 py-4 text-lg transition-all duration-300 hover:bg-opacity-90"
				>
					Start a project
				</a>
				<a
					href="/work"
					class="inline-block border border-[#F5F5F5] text-[#F5F5F5] px-8 py-4 text-lg transition-all duration-300 hover:bg-[#F5F5F5] hover:text-black"
				>
					View our work
				</a>
			</div>
		</div>
	</section>

	<Footer slot="footer" />
</Layout>

<script>
	// Dynamic text animation
	const words = ['easier', 'smarter', 'minimal', 'in the open', 'the future'];
	let currentIndex = 0;

	const dynamicTextElement = document.getElementById(
		'dynamic-text',
	) as HTMLElement | null;
	const textSpan = dynamicTextElement?.querySelector(
		'span',
	) as HTMLElement | null;
	const cursor = dynamicTextElement?.querySelector(
		'span:last-child',
	) as HTMLElement | null;

	if (textSpan && cursor && dynamicTextElement) {
		const typeWord = async (word: string) => {
			textSpan.textContent = '';

			for (let i = 0; i < word.length; i++) {
				await new Promise((resolve) =>
					setTimeout(resolve, 10 + Math.random() * 100),
				);
				if (textSpan) {
					textSpan.textContent += word[i];
				}
			}
		};

		const clearWord = async () => {
			if (dynamicTextElement && cursor) {
				dynamicTextElement.classList.add('bg-[#F5F5F5]', 'text-black');
				cursor.style.display = 'none';

				await new Promise((resolve) =>
					setTimeout(resolve, 300 + Math.random() * 100),
				);

				if (textSpan) {
					textSpan.textContent = '';
				}
				dynamicTextElement.classList.remove('bg-[#F5F5F5]', 'text-black');
				cursor.style.display = 'block';
			}
		};

		const startAnimation = async () => {
			while (true) {
				const word = words[currentIndex];
				await typeWord(word);

				await new Promise((resolve) =>
					setTimeout(resolve, 2000 + Math.random() * 1000),
				);

				await clearWord();

				await new Promise((resolve) => setTimeout(resolve, 200));

				currentIndex = (currentIndex + 1) % words.length;
			}
		};

		// Start animation after page load
		setTimeout(startAnimation, 1000);
	}
</script>
