---
import Layout from './Layout.astro';
import Footer from '../components/Footer.astro';
import Navbar from '../components/Navbar.astro';

export interface Props {
	frontmatter: {
		title: string;
		description?: string;
		date: string;
		author?: string;
		tags?: string[];
		draft?: boolean;
	};
}

const { frontmatter } = Astro.props;

const formatDate = (date: string) => {
	return new Date(date).toLocaleDateString('en-US', {
		year: 'numeric',
		month: 'long',
		day: 'numeric',
	});
};
---

<style>
	.tag {
		background: rgba(245, 245, 245, 0.1);
		border: 1px solid rgba(245, 245, 245, 0.2);
		transition: all 0.3s ease;
	}

	.tag:hover {
		background: rgba(245, 245, 245, 0.2);
		border-color: rgba(245, 245, 245, 0.4);
	}
</style>

<Layout
	title={`${frontmatter.title} | ez dev`}
	description={frontmatter.description ||
		`Read "${frontmatter.title}" on the ez dev blog.`}
>
	<section
		class="w-[min(80ch,100vw)] min-h-screen mt-[8rem] flex items-start justify-center px-6 md:px-8"
	>
		<div class="w-full mx-auto flex flex-col gap-8">
			<Navbar currentPath="/blog" />

			<!-- Blog post header -->
			<header class="space-y-6">
				<h1
					class="text-4xl md:text-5xl lg:text-6xl font-light text-[#F5F5F5] leading-tight"
					style="font-family: 'Times New Roman', Times, serif; line-height: 1.2; letter-spacing: -0.02em;"
				>
					{frontmatter.title}
				</h1>

				<div>
					<div
						class="flex flex-col md:flex-row md:items-center md:justify-between gap-4"
					>
						<div class="flex flex-col gap-2">
							<time class="text-[#F5F5F5] opacity-80">
								{formatDate(frontmatter.date)}
							</time>
							{
								frontmatter.author && (
									<span class="text-[#F5F5F5] opacity-60">
										by {frontmatter.author}
									</span>
								)
							}
						</div>

						{
							frontmatter.tags && frontmatter.tags.length > 0 && (
								<div class="flex flex-wrap gap-2">
									{frontmatter.tags.map((tag: string) => (
										<a
											href={`/blog?tag=${encodeURIComponent(tag)}`}
											class="tag px-3 py-1 text-sm rounded-full text-[#F5F5F5]"
										>
											{tag}
										</a>
									))}
								</div>
							)
						}
					</div>
				</div>
			</header>

			<!-- Blog post content -->
			<article class="markdown-body max-w-none">
				<slot />
			</article>
		</div>
	</section>

	<Footer slot="footer" />
</Layout>
